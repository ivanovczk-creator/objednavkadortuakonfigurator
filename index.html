<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cukr√°≈ôstv√≠ Blahutovi</title>
    <meta name="description" content="Tradiƒçn√≠ cukr√°rna s l√°skou k ≈ôemeslu. Objednejte si ty nejlep≈°√≠ dorty online." />
    
    <!-- Social Media Tags (Open Graph) -->
    <meta property="og:title" content="Cukr√°≈ôstv√≠ Blahutovi" />
    <meta property="og:description" content="Tradiƒçn√≠ cukr√°rna s l√°skou k ≈ôemeslu. Sestavte si vlastn√≠ dort nebo vyberte z na≈°√≠ nab√≠dky." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://placehold.co/1200x630/fecdd3/881337?text=Cukr√°≈ôstv√≠+Blahutovi" />
    
    <!-- Favicon (Cake Emoji) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üç∞</text></svg>">
    
    <!-- React & ReactDOM (CDNJS - More stable) -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel Standalone -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#e11d48', // rose-600
              secondary: '#fca5a5', // rose-300
              cream: '#fff1f2', // rose-50
              dark: '#44403c', // stone-700
            },
            fontFamily: {
              serif: ['"Playfair Display"', 'serif'],
              sans: ['"Lato"', 'sans-serif'],
            },
            animation: {
              'fade-in-up': 'fadeInUp 0.8s ease-out forwards',
            },
            keyframes: {
              fadeInUp: {
                '0%': { opacity: '0', transform: 'translateY(20px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              }
            }
          }
        }
      }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    
    <style>
      body {
        font-family: 'Lato', sans-serif;
        background-color: #fafaf9; /* stone-50 */
        color: #44403c;
      }
      h1, h2, h3, h4, h5, h6 {
        font-family: 'Playfair Display', serif;
      }
      body.modal-open {
        overflow: hidden;
      }
      /* Smooth scrolling */
      html {
        scroll-behavior: smooth;
      }
      #error-container {
        display: none;
        padding: 20px;
        background: #fee2e2;
        color: #991b1b;
        border: 1px solid #f87171;
        margin: 20px;
        border-radius: 8px;
        font-family: sans-serif;
        z-index: 9999;
        position: relative;
      }
    </style>
  <link rel="stylesheet" href="/index.css">
</head>
  <body>
    <div id="error-container"></div>
    <div id="root" class="flex min-h-screen items-center justify-center text-xl text-rose-500 font-serif">
      <div class="text-center">
        <div class="mb-4 text-4xl animate-bounce">üç∞</div>
        <div>Naƒç√≠t√°m cukr√°rnu...</div>
        <div class="text-sm text-stone-400 mt-2">Chvilku strpen√≠</div>
      </div>
    </div>

    <!-- Error Handler Script -->
    <script>
      window.onerror = function(message, source, lineno, colno, error) {
        var container = document.getElementById('error-container');
        var root = document.getElementById('root');
        if(root) root.style.display = 'none';
        
        container.style.display = 'block';
        container.innerHTML = '<strong>Omlouv√°me se, nastala chyba:</strong><br>' + message + 
        '<br><br>Zkuste str√°nku obnovit (F5).';
        console.error(error);
      };
    </script>

    <!-- MAIN APPLICATION SCRIPT -->
    <script type="text/babel" data-presets="env,react">
      
      // --- CONSTANTS & DATA ---
      const EMAIL_TO = "objednavky@cukrarstviblahutovi.cz";
      const MAIN_WEB_URL = "https://www.cukrarstviblahutovi.cz";
      const CONFIGURATOR_URL = "https://www.cukrarstviblahutovi.cz/konfigurator-dortu/";
      
      const BRANCHES = [
        "Hlavn√≠ prodejna (Centrum)",
        "Poboƒçka N√°mƒõst√≠",
        "V√Ωdejna Sklad"
      ];

      // KOMPLETN√ç SEZNAM DORT≈Æ (1-61)
      const PRODUCTS = [
        { id: 1, name: "V MARCIP√ÅNU, 2 FIGURKY", price: 1800, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 1" },
        { id: 2, name: "OBMAZAN√ù, MARCIP√ÅNOV√â OZDOBY", price: 1900, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 2" },
        { id: 3, name: "2 PATRA, V MARCIP√ÅNU", price: 2800, description: "Orientaƒçn√≠ poƒçet porc√≠: 20", imageAlt: "Dort ƒç. 3" },
        { id: 4, name: "OBMAZAN√ù, SNƒöHOV√â OZDOBY, MAKRONKY", price: 1600, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 4" },
        { id: 5, name: "V MARCIP√ÅNU, 2 MARCIP√ÅNOV√â FIGURKY", price: 1600, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 5" },
        { id: 6, name: "V MARCIP√ÅNU (3,5 Kg)", price: 2100, description: "Orientaƒçn√≠ poƒçet porc√≠: 15-20", imageAlt: "Dort ƒç. 6" },
        { id: 7, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â OZDOBY", price: 1700, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 7" },
        { id: 8, name: "V MARCIP√ÅNU, 1 MARCIP√ÅNOV√Å FIGURKA", price: 1600, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 8" },
        { id: 9, name: "MARCIP√ÅNOV√Å PLACKA, JEDL√ù PAP√çR", price: 1400, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 9" },
        { id: 10, name: "V MARCIP√ÅNU, OZDOBY, JEDL√ù PAP√çR", price: 2000, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 10" },
        { id: 11, name: "OBMAZAN√ù, MARCIP√ÅNOV√â OZDOBY", price: 1800, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 11" },
        { id: 12, name: "MODELOVAN√ù V MARCIP√ÅNU - BEZUBKA", price: 3100, description: "Orientaƒçn√≠ poƒçet porc√≠: 25", imageAlt: "Dort ƒç. 12" },
        { id: 13, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR", price: 1400, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 13" },
        { id: 14, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â OZDOBY", price: 2700, description: "Orientaƒçn√≠ poƒçet porc√≠: 15-20", imageAlt: "Dort ƒç. 14" },
        { id: 15, name: "V MARCIP√ÅNU", price: 1500, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 15" },
        { id: 16, name: "V MARCIP√ÅNU, 1 MARCIP√ÅNOV√Å FIGURKA", price: 800, description: "Velikost: 6-8 porc√≠", imageAlt: "Dort ƒç. 16" },
        { id: 17, name: "V MARCIP√ÅNU", price: 2300, description: "Orientaƒçn√≠ poƒçet porc√≠: 14", imageAlt: "Dort ƒç. 17" },
        { id: 18, name: "ƒå√çSLICE V MARCIP√ÅNU (4,5 Kg)", price: 2900, description: "Orientaƒçn√≠ poƒçet porc√≠: 25-30", imageAlt: "Dort ƒç. 18" },
        { id: 19, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR", price: 1600, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 19" },
        { id: 20, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR", price: 1500, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 20" },
        { id: 21, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR", price: 1400, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 21" },
        { id: 22, name: "V MARCIP√ÅNU, FIGURKY", price: 1900, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 22" },
        { id: 23, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â OZDOBY", price: 1100, description: "Velikost: 8-10 porc√≠", imageAlt: "Dort ƒç. 23" },
        { id: 24, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR", price: 1400, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 24" },
        { id: 25, name: "V MARCIP√ÅNU, BAGR", price: 1700, description: "Velikost: 8-10 porc√≠", imageAlt: "Dort ƒç. 25" },
        { id: 26, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â FIGURKY", price: 1700, description: "Velikost: 8-10 porc√≠", imageAlt: "Dort ƒç. 26" },
        { id: 27, name: "V ƒåOKOL√ÅDƒö, OZDOBY, JEDL√ù PAP√çR (2,5 Kg)", price: 1750, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 27" },
        { id: 28, name: "OBSYPAN√ù PI≈†KOTEM, MARCIP√ÅNOV√â FIGURKY", price: 1650, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 28" },
        { id: 29, name: "OBMAZAN√ù, OZDOBY, JEDL√ù PAP√çR", price: 2100, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 29" },
        { id: 30, name: "2 PATRA S ƒåOKOL√ÅDOU, OZDOBY, JEDL√ù P.", price: 2700, description: "Orientaƒçn√≠ poƒçet porc√≠: 18-20", imageAlt: "Dort ƒç. 30" },
        { id: 31, name: "2 PATRA V MARCIP√ÅNU, BING", price: 3000, description: "Orientaƒçn√≠ poƒçet porc√≠: 18-20", imageAlt: "Dort ƒç. 31" },
        { id: 32, name: "V MARCIP√ÅNU, 6 MARCIP√ÅNOV√ùCH FIGUREK PAW", price: 2500, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 32" },
        { id: 33, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â FIGURKY A OZDOBY", price: 2100, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 33" },
        { id: 34, name: "V MARCIP√ÅNU, 1 MARCIP√ÅNOV√Å FIGURKA", price: 1350, description: "Velikost: 8-10 porc√≠", imageAlt: "Dort ƒç. 34" },
        { id: 35, name: "V MARCIP√ÅNU, 1 MARCIP√ÅNOV√Å FIGURKA", price: 1350, description: "Velikost: 8-10 porc√≠", imageAlt: "Dort ƒç. 35" },
        { id: 36, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â OZDOBY", price: 1900, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 36" },
        { id: 37, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR, FIGURKA", price: 1700, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 37" },
        { id: 38, name: "MARCIP√ÅN, KR√âM, OVOCE", price: 1500, description: "Velikost: 10-12 porc√≠", imageAlt: "Dort ƒç. 38" },
        { id: 39, name: "OBMAZAN√ù, OZDOBY, JEDL√ù PAP√çR, OVOCE", price: 1250, description: "Orientaƒçn√≠ poƒçet porc√≠: 10", imageAlt: "Dort ƒç. 39" },
        { id: 40, name: "OBMAZAN√ù, ƒåOKOL√ÅDA, OVOCE", price: 2000, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 40" },
        { id: 41, name: "OBMAZAN√ù, ƒåOKOL√ÅDOV√ù OBSYP, OVOCE", price: 3200, description: "Orientaƒçn√≠ poƒçet porc√≠: 25", imageAlt: "Dort ƒç. 41" },
        { id: 42, name: "NAH√ù DORT, OVOCE", price: 1300, description: "Velikost: 8-10 porc√≠", imageAlt: "Dort ƒç. 42" },
        { id: 43, name: "ƒåOKOL√ÅDOV√ù PA≈ò√ç≈Ω, MALINY", price: 700, description: "Orientaƒçn√≠ poƒçet porc√≠: 10", imageAlt: "Dort ƒç. 43" },
        { id: 44, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â OZDOBY", price: 2200, description: "Orientaƒçn√≠ poƒçet porc√≠: 15-20", imageAlt: "Dort ƒç. 44" },
        { id: 45, name: "V ƒåOKOL√ÅDƒö, MARCIP√ÅNOV√â OZDOBY", price: 2100, description: "Orientaƒçn√≠ poƒçet porc√≠: 15-20", imageAlt: "Dort ƒç. 45" },
        { id: 46, name: "MAL√â SRDCE", price: 450, description: "Orientaƒçn√≠ poƒçet porc√≠: 6", imageAlt: "Dort ƒç. 46" },
        { id: 47, name: "V ƒåOKOL√ÅDƒö, MARCIP√ÅNOV√â OZDOBY", price: 3300, description: "Orientaƒçn√≠ poƒçet porc√≠: 20-25", imageAlt: "Dort ƒç. 47" },
        { id: 48, name: "V ƒåOKOL√ÅDƒö, MARCIP√ÅNOV√â OZDOBY", price: 700, description: "Orientaƒçn√≠ poƒçet porc√≠: 6", imageAlt: "Dort ƒç. 48" },
        { id: 49, name: "OBMAZAN√ù, MARCIP√ÅNOV√â OZDOBY", price: 1800, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 49" },
        { id: 50, name: "MINI ROL√ÅDY", price: 200, description: "Orientaƒçn√≠ poƒçet porc√≠: 10", imageAlt: "Dort ƒç. 50" },
        { id: 51, name: "OBMAZAN√ù, OVOCE", price: 5500, description: "Orientaƒçn√≠ poƒçet porc√≠: 40-50", imageAlt: "Dort ƒç. 51" },
        { id: 52, name: "B√çL√ù FOND√ÅN, OVOCE", price: 2800, description: "Orientaƒçn√≠ poƒçet porc√≠: 15-20", imageAlt: "Dort ƒç. 52" },
        { id: 53, name: "NAH√ù DORT, OVOCE (5,5 Kg)", price: 3500, description: "Orientaƒçn√≠ poƒçet porc√≠: 20-25", imageAlt: "Dort ƒç. 53" },
        { id: 54, name: "OBMAZAN√ù, ≈ΩIV√â KVƒöTY", price: 3300, description: "Orientaƒçn√≠ poƒçet porc√≠: 20-25", imageAlt: "Dort ƒç. 54" },
        { id: 55, name: "SVATEBN√ç A DƒöKOVAC√ç DORTY V MARCIP√ÅNU", price: 5000, description: "Orientaƒçn√≠ poƒçet porc√≠: 35-40", imageAlt: "Dort ƒç. 55" },
        { id: 56, name: "OBMAZAN√ù, ƒåOKOL√ÅDOV√ù OBSYP, OZDOBY", price: 3300, description: "Orientaƒçn√≠ poƒçet porc√≠: 20-25", imageAlt: "Dort ƒç. 56" },
        { id: 57, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â OZDOBY", price: 2900, description: "Orientaƒçn√≠ poƒçet porc√≠: 20-25", imageAlt: "Dort ƒç. 57" },
        { id: 58, name: "OBMAZAN√ù, MARCIP√ÅNOV√â OZDOBY", price: 3000, description: "Orientaƒçn√≠ poƒçet porc√≠: 20-25", imageAlt: "Dort ƒç. 58" },
        { id: 59, name: "V MARCIP√ÅNU", price: 1500, description: "Orientaƒçn√≠ poƒçet porc√≠: 12", imageAlt: "Dort ƒç. 59" },
        { id: 60, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR", price: 2500, description: "Orientaƒçn√≠ poƒçet porc√≠: 15-20", imageAlt: "Dort ƒç. 60" },
        { id: 61, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR, ƒåOKO HOBLINKY", price: 3000, description: "Orientaƒçn√≠ poƒçet porc√≠: 15-20", imageAlt: "Dort ƒç. 61" }
      ];

      // --- COMPONENTS ---

      // Button Component
      const Button = ({ 
        children, 
        variant = 'primary', 
        size = 'md', 
        fullWidth = false,
        className = '',
        ...props 
      }) => {
        const baseStyles = "inline-flex items-center justify-center rounded-full font-bold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed";
        
        const variants = {
          primary: "bg-rose-600 hover:bg-rose-700 text-white shadow-lg hover:shadow-xl focus:ring-rose-500",
          secondary: "bg-white hover:bg-rose-50 text-rose-600 border border-rose-200 shadow-sm hover:shadow-md focus:ring-rose-200",
          outline: "bg-transparent border-2 border-white text-white hover:bg-white/10 focus:ring-white",
        };

        const sizes = {
          sm: "px-3 py-1.5 text-sm",
          md: "px-6 py-3 text-base",
          lg: "px-8 py-4 text-lg",
          xl: "px-10 py-5 text-xl uppercase tracking-wide",
        };

        const widthClass = fullWidth ? "w-full" : "";

        return (
          <button 
            className={`${baseStyles} ${variants[variant]} ${sizes[size]} ${widthClass} ${className}`}
            {...props}
          >
            {children}
          </button>
        );
      };

      // Modal Component
      const Modal = ({ isOpen, onClose, title, children }) => {
        React.useEffect(() => {
          if (isOpen) {
            document.body.classList.add('modal-open');
          } else {
            document.body.classList.remove('modal-open');
          }
          return () => {
            document.body.classList.remove('modal-open');
          };
        }, [isOpen]);

        if (!isOpen) return null;

        return (
          <div className="fixed inset-0 z-50 flex items-center justify-center overflow-y-auto overflow-x-hidden bg-black/50 p-4 backdrop-blur-sm transition-opacity">
            <div className="relative w-full max-w-lg rounded-2xl bg-white shadow-2xl ring-1 ring-gray-200 my-8 animate-fade-in-up">
              
              {/* Header */}
              <div className="flex items-center justify-between border-b border-gray-100 px-6 py-4">
                <h3 className="text-xl font-serif font-bold text-gray-900">
                  {title}
                </h3>
                <button
                  onClick={onClose}
                  className="rounded-full p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600 focus:outline-none"
                  aria-label="Zav≈ô√≠t"
                >
                  <svg className="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                  </svg>
                </button>
              </div>

              {/* Body */}
              <div className="p-6">
                {children}
              </div>
            </div>
          </div>
        );
      };

      // Order Form Component
      const OrderForm = ({ product, onCancel }) => {
        const getMinDate = () => {
          const date = new Date();
          date.setDate(date.getDate() + 7);
          return date.toISOString().split('T')[0];
        };

        const [formData, setFormData] = React.useState({
          name: '',
          phone: '',
          date: getMinDate(),
          branch: BRANCHES[0],
          notes: ''
        });

        const handleChange = (e) => {
          const { name, value } = e.target;
          setFormData(prev => ({ ...prev, [name]: value }));
        };

        const handleSubmit = (e) => {
          e.preventDefault();

          const subject = encodeURIComponent(`Objedn√°vka dortu: ${product.name}`);
          const body = encodeURIComponent(`
Dobr√Ω den,

M√°m z√°jem o z√°vaznou objedn√°vku dortu.

DETAILY PRODUKTU:
-----------------
Dort: ${product.name}
Cena: ${product.price} Kƒç
ID Produktu: ${product.id}

√öDAJE Z√ÅKAZN√çKA:
----------------
Jm√©no: ${formData.name}
Telefon: ${formData.phone}
Datum vyzvednut√≠: ${formData.date}
Poboƒçka: ${formData.branch}

Pozn√°mka:
${formData.notes || '-'}

Dƒõkuji.
          `);

          window.location.href = `mailto:${EMAIL_TO}?subject=${subject}&body=${body}`;
          // Po odesl√°n√≠ poƒçk√°me chv√≠li a zav≈ôeme modal
          setTimeout(onCancel, 1000);
        };

        return (
          <form onSubmit={handleSubmit} className="space-y-4">
            <div className="rounded-lg bg-rose-50 p-4 mb-4 border border-rose-100">
              <p className="text-xs font-semibold text-rose-800 uppercase tracking-wide mb-1">Vybran√Ω produkt</p>
              <div className="flex justify-between items-center">
                <p className="text-lg font-bold text-gray-900">{product.name}</p>
                <p className="text-lg font-semibold text-rose-600">{product.price} Kƒç</p>
              </div>
            </div>

            <div>
              <label htmlFor="name" className="block text-sm font-medium text-gray-700 mb-1">Jm√©no a P≈ô√≠jmen√≠</label>
              <input
                required
                type="text"
                id="name"
                name="name"
                value={formData.name}
                onChange={handleChange}
                className="w-full rounded-md border-gray-300 bg-white px-4 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-rose-500 sm:text-sm sm:leading-6"
                placeholder="Jan Nov√°k"
              />
            </div>

            <div>
              <label htmlFor="phone" className="block text-sm font-medium text-gray-700 mb-1">Telefon</label>
              <input
                required
                type="tel"
                id="phone"
                name="phone"
                value={formData.phone}
                onChange={handleChange}
                className="w-full rounded-md border-gray-300 bg-white px-4 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-rose-500 sm:text-sm sm:leading-6"
                placeholder="+420 777 888 999"
              />
            </div>

            <div className="grid grid-cols-1 gap-4 sm:grid-cols-2">
              <div>
                <label htmlFor="date" className="block text-sm font-medium text-gray-700 mb-1">Datum vyzvednut√≠</label>
                <input
                  required
                  type="date"
                  id="date"
                  name="date"
                  min={getMinDate()}
                  value={formData.date}
                  onChange={handleChange}
                  className="w-full rounded-md border-gray-300 bg-white px-4 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-rose-500 sm:text-sm sm:leading-6"
                />
                <p className="mt-1 text-xs text-gray-500">Min. 7 dn√≠ na p≈ô√≠pravu</p>
              </div>

              <div>
                <label htmlFor="branch" className="block text-sm font-medium text-gray-700 mb-1">Poboƒçka</label>
                <select
                  id="branch"
                  name="branch"
                  value={formData.branch}
                  onChange={handleChange}
                  className="w-full rounded-md border-gray-300 bg-white px-4 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-rose-500 sm:text-sm sm:leading-6"
                >
                  {BRANCHES.map(branch => (
                    <option key={branch} value={branch}>{branch}</option>
                  ))}
                </select>
              </div>
            </div>

            <div>
              <label htmlFor="notes" className="block text-sm font-medium text-gray-700 mb-1">Pozn√°mka (nepovinn√©)</label>
              <textarea
                id="notes"
                name="notes"
                rows={2}
                value={formData.notes}
                onChange={handleChange}
                className="w-full rounded-md border-gray-300 bg-white px-4 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-rose-500 sm:text-sm sm:leading-6"
                placeholder="Speci√°ln√≠ p≈ô√°n√≠, n√°pis na dort..."
              />
            </div>

            <div className="pt-4 flex gap-3">
              <Button type="button" variant="secondary" fullWidth onClick={onCancel}>
                Zru≈°it
              </Button>
              <Button type="submit" variant="primary" fullWidth>
                Odeslat objedn√°vku
              </Button>
            </div>
            <p className="text-center text-xs text-gray-400 mt-2">Otev≈ôe se v√°≈° emailov√Ω klient s p≈ôedvyplnƒõnou zpr√°vou.</p>
          </form>
        );
      };

      // Product Card Component
      const ProductCard = ({ product, onOrder }) => {
        // Seznam koncovek, kter√© se zkou≈°√≠. 
        // P≈ôid√°no 'jfif', proto≈æe to je ƒçast√Ω form√°t sta≈æen√Ω z netu, kter√Ω se tv√°≈ô√≠ jako jpg.
        const EXTENSIONS = ['jpg', 'jpeg', 'png', 'webp', 'jfif', 'JPG', 'JPEG', 'PNG', 'JFIF'];
        const [extIndex, setExtIndex] = React.useState(0);
        const [usePlaceholder, setUsePlaceholder] = React.useState(false);

        React.useEffect(() => {
          setExtIndex(0);
          setUsePlaceholder(false);
        }, [product.id]);

        const getImageUrl = () => {
          if (usePlaceholder) {
            // Fallback - gener√°tor obr√°zk≈Ø, pokud se fotka nenajde
            return `https://placehold.co/600x600/fff1f2/e11d48?text=${encodeURIComponent(product.name.substring(0, 20))}`;
          }
          const extension = EXTENSIONS[extIndex];
          // P≈ôedpokl√°d√°me slo≈æku "images" ve stejn√©m adres√°≈ôi jako index.html
          return `images/${product.id}.${extension}`;
        };

        const handleImageError = () => {
          // Pokud se obr√°zek s aktu√°ln√≠ koncovkou nenaƒçte, zkus√≠me dal≈°√≠
          if (extIndex < EXTENSIONS.length - 1) {
            setExtIndex(prev => prev + 1);
          } else {
            // Pokud dojdou v≈°echny koncovky, zobraz√≠me placeholder
            setUsePlaceholder(true);
          }
        };

        return (
          <div className="group flex flex-col h-full overflow-hidden rounded-2xl bg-white shadow-sm transition-all hover:-translate-y-1 hover:shadow-xl border border-stone-100">
            <div className="relative aspect-square overflow-hidden bg-stone-100">
              <img
                src={getImageUrl()}
                alt={product.imageAlt}
                onError={handleImageError}
                className="h-full w-full object-cover transition-transform duration-700 group-hover:scale-110"
                loading="lazy"
              />
              <div className="absolute top-4 right-4 rounded-full bg-white/95 px-3 py-1 text-sm font-bold text-gray-900 shadow-sm backdrop-blur-sm">
                {product.price} Kƒç
              </div>
              <div className="absolute top-4 left-4 rounded-full bg-rose-500/90 px-3 py-1 text-xs font-bold text-white shadow-sm backdrop-blur-sm">
                #{product.id}
              </div>
            </div>
            
            <div className="flex flex-1 flex-col p-6">
              <h3 className="mb-2 text-xl font-serif font-bold text-gray-900 leading-tight">{product.name}</h3>
              <p className="mb-6 flex-1 text-sm leading-relaxed text-gray-600">
                {product.description}
              </p>
              
              <Button 
                onClick={() => onOrder(product)} 
                variant="secondary" 
                fullWidth
                className="mt-auto group-hover:bg-rose-50 group-hover:border-rose-300"
              >
                Objednat dort
              </Button>
            </div>
          </div>
        );
      };

      // Hero Component
      const Hero = () => {
        return (
          <section className="relative flex min-h-[75vh] items-center justify-center overflow-hidden bg-rose-50 px-4 text-center">
            {/* Decorative background circles */}
            <div className="absolute top-0 left-0 h-96 w-96 -translate-x-1/2 -translate-y-1/2 rounded-full bg-rose-100/60 blur-3xl mix-blend-multiply"></div>
            <div className="absolute bottom-0 right-0 h-96 w-96 translate-x-1/2 translate-y-1/2 rounded-full bg-orange-100/60 blur-3xl mix-blend-multiply"></div>
            <div className="absolute top-1/2 left-1/2 h-96 w-96 -translate-x-1/2 -translate-y-1/2 rounded-full bg-white/40 blur-3xl"></div>

            <div className="relative z-10 mx-auto max-w-4xl space-y-8 animate-fade-in-up">
              <div className="space-y-6">
                <span className="inline-block rounded-full bg-white/80 px-4 py-1.5 text-xs font-bold tracking-widest text-rose-600 uppercase shadow-sm backdrop-blur-sm ring-1 ring-rose-100">
                  Rodinn√° tradice od roku 1995
                </span>
                <h1 className="text-5xl font-bold leading-tight text-gray-900 sm:text-6xl md:text-7xl font-serif">
                  Cukr√°≈ôstv√≠ <span className="text-rose-600">Blahutovi</span>
                </h1>
                <p className="mx-auto max-w-2xl text-lg text-gray-600 md:text-xl font-light leading-relaxed">
                  Tradiƒçn√≠ cukr√°rna s l√°skou k ≈ôemeslu. Peƒçeme z poctiv√Ωch surovin, 
                  ƒçerstv√©ho m√°sla a prav√© smetany.
                </p>
              </div>

              <div className="flex flex-col items-center justify-center gap-4 pt-4 sm:flex-row">
                <a href={CONFIGURATOR_URL} className="w-full sm:w-auto">
                  <Button size="xl" className="w-full shadow-rose-300/50 shadow-2xl hover:scale-105 transition-transform">
                    <span className="mr-2">üç∞</span> Sestavit vlastn√≠ dort
                  </Button>
                </a>
              </div>
              
              <p className="text-sm text-gray-400">
                P≈ôejdete do na≈°eho online konfigur√°toru
              </p>
            </div>
          </section>
        );
      };

      // App Component
      const App = () => {
        const [selectedProduct, setSelectedProduct] = React.useState(null);
        const [isModalOpen, setIsModalOpen] = React.useState(false);

        const handleOrderClick = (product) => {
          setSelectedProduct(product);
          setIsModalOpen(true);
        };

        const handleCloseModal = () => {
          setIsModalOpen(false);
          setTimeout(() => setSelectedProduct(null), 300);
        };

        return (
          <div className="min-h-screen bg-stone-50 text-stone-800 font-sans selection:bg-rose-200 selection:text-rose-900">
            {/* FIXED NAV - ALWAYS VISIBLE */}
            <nav className="fixed top-0 left-0 w-full p-4 z-50 pointer-events-none">
              <div className="container mx-auto">
                 <a href={MAIN_WEB_URL} className="pointer-events-auto inline-flex items-center gap-2 text-stone-600 hover:text-rose-600 font-bold bg-white/90 backdrop-blur px-5 py-2.5 rounded-full shadow-lg border border-stone-100 transition-all hover:scale-105">
                    <span>‚¨Ö</span> Zpƒõt na hlavn√≠ web
                 </a>
              </div>
            </nav>

            <Hero />

            <section className="py-20 px-4 md:px-8 bg-white" id="nabidka">
              <div className="container mx-auto max-w-7xl">
                <div className="mb-16 text-center space-y-4">
                  <h2 className="text-3xl md:text-4xl font-serif font-bold text-gray-900">
                    Nebo si vyberte z na≈°√≠ nab√≠dky
                  </h2>
                  <div className="h-1 w-20 bg-rose-400 mx-auto rounded-full"></div>
                  <p className="text-gray-600 max-w-2xl mx-auto">
                    Na≈°e nejobl√≠benƒõj≈°√≠ klasiky, kter√© pro v√°s peƒçeme ka≈æd√Ω den ƒçerstv√©. 
                    Objednejte si je snadno online a vyzvednƒõte na poboƒçce.
                  </p>
                </div>

                <div className="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
                  {PRODUCTS.map((product) => (
                    <ProductCard 
                      key={product.id} 
                      product={product} 
                      onOrder={handleOrderClick} 
                    />
                  ))}
                </div>
              </div>
            </section>

            <footer className="bg-stone-900 text-stone-400 py-16 px-4">
              <div className="container mx-auto text-center space-y-8">
                <div className="space-y-2">
                   <h3 className="text-3xl font-serif text-white">Cukr√°≈ôstv√≠ Blahutovi</h3>
                   <p className="text-stone-500">Sladk√Ω ≈æivot od roku 1995</p>
                </div>
                
                <div className="flex flex-wrap justify-center gap-8 text-sm font-medium">
                  <a href={MAIN_WEB_URL} className="hover:text-white transition-colors">O n√°s</a>
                  <a href={MAIN_WEB_URL} className="hover:text-white transition-colors">Poboƒçky</a>
                  <a href={MAIN_WEB_URL} className="hover:text-white transition-colors">Kontakt</a>
                </div>

                <div className="pt-8 border-t border-stone-800">
                  <p>¬© {new Date().getFullYear()} Cukr√°≈ôstv√≠ Blahutovi. V≈°echna pr√°va vyhrazena.</p>
                </div>
              </div>
            </footer>

            <Modal 
              isOpen={isModalOpen} 
              onClose={handleCloseModal}
              title="Nov√° objedn√°vka"
            >
              {selectedProduct && (
                <OrderForm 
                  product={selectedProduct} 
                  onCancel={handleCloseModal} 
                />
              )}
            </Modal>
          </div>
        );
      };

      // Render
      try {
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
      } catch (err) {
        console.error("Mounting error:", err);
        document.getElementById('error-container').style.display = 'block';
        document.getElementById('error-container').innerHTML = 'Chyba p≈ôi startu aplikace: ' + err.message;
      }
    </script>
  <script type="module" src="/index.tsx"></script>
</body>
</html>