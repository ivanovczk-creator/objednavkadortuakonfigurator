<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cukr√°≈ôstv√≠ Blahutovi - Katalog dort≈Ø</title>
    <meta name="description" content="Tradiƒçn√≠ cukr√°rna s l√°skou k ≈ôemeslu. Objednejte si ty nejlep≈°√≠ dorty online." />
    
    <!-- Social Media Tags -->
    <meta property="og:title" content="Cukr√°≈ôstv√≠ Blahutovi" />
    <meta property="og:description" content="Katalog dort≈Ø a online objedn√°vka." />
    <meta property="og:image" content="https://placehold.co/1200x630/fecdd3/881337?text=Cukr√°≈ôstv√≠+Blahutovi" />
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üç∞</text></svg>">
    
    <!-- React & Tailwind -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <style>
      body { font-family: 'Lato', sans-serif; background-color: #fff1f2; color: #333; }
      h1, h2, h3 { font-family: 'Playfair Display', serif; }
      .loader { border: 4px solid #f3f3f3; border-top: 4px solid #e11d48; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 20px auto; }
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
  <link rel="stylesheet" href="/index.css">
</head>
  <body>
    
    <!-- Loading Element (zmiz√≠ po naƒçten√≠ Reactu) -->
    <div id="initial-loader" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center;">
        <div class="loader"></div>
        <p style="color: #e11d48; font-weight: bold;">Naƒç√≠t√°m cukr√°rnu...</p>
    </div>

    <!-- React Root -->
    <div id="root"></div>

    <!-- DATA (Oddƒõlenƒõ pro stabilitu) -->
    <script>
      window.APP_DATA = {
        EMAIL_TO: "objednavky@cukrarstviblahutovi.cz",
        MAIN_WEB_URL: "https://www.cukrarstviblahutovi.cz",
        CONFIGURATOR_URL: "https://www.cukrarstviblahutovi.cz/konfigurator-dortu/",
        BRANCHES: ["Hlavn√≠ prodejna", "Poboƒçka N√°mƒõst√≠", "Sklad"],
        PRODUCTS: [
          { id: 1, name: "V MARCIP√ÅNU, 2 FIGURKY", price: 1800, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 2, name: "OBMAZAN√ù, MARCIP√ÅNOV√â OZDOBY", price: 1900, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 3, name: "2 PATRA, V MARCIP√ÅNU", price: 2800, description: "Orientaƒçn√≠ poƒçet porc√≠: 20" },
          { id: 4, name: "OBMAZAN√ù, SNƒöHOV√â OZDOBY, MAKRONKY", price: 1600, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 5, name: "V MARCIP√ÅNU, 2 MARCIP√ÅNOV√â FIGURKY", price: 1600, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 6, name: "V MARCIP√ÅNU (3,5 Kg)", price: 2100, description: "Orientaƒçn√≠ poƒçet porc√≠: 15-20" },
          { id: 7, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â OZDOBY", price: 1700, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 8, name: "V MARCIP√ÅNU, 1 MARCIP√ÅNOV√Å FIGURKA", price: 1600, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 9, name: "MARCIP√ÅNOV√Å PLACKA, JEDL√ù PAP√çR", price: 1400, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 10, name: "V MARCIP√ÅNU, OZDOBY, JEDL√ù PAP√çR", price: 2000, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 11, name: "OBMAZAN√ù, MARCIP√ÅNOV√â OZDOBY", price: 1800, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 12, name: "MODELOVAN√ù V MARCIP√ÅNU - BEZUBKA", price: 3100, description: "Orientaƒçn√≠ poƒçet porc√≠: 25" },
          { id: 13, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR", price: 1400, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 14, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â OZDOBY", price: 2700, description: "Orientaƒçn√≠ poƒçet porc√≠: 15-20" },
          { id: 15, name: "V MARCIP√ÅNU", price: 1500, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 16, name: "V MARCIP√ÅNU, 1 MARCIP√ÅNOV√Å FIGURKA", price: 800, description: "Velikost: 6-8 porc√≠" },
          { id: 17, name: "V MARCIP√ÅNU", price: 2300, description: "Orientaƒçn√≠ poƒçet porc√≠: 14" },
          { id: 18, name: "ƒå√çSLICE V MARCIP√ÅNU (4,5 Kg)", price: 2900, description: "Orientaƒçn√≠ poƒçet porc√≠: 25-30" },
          { id: 19, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR", price: 1600, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 20, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR", price: 1500, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 21, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR", price: 1400, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 22, name: "V MARCIP√ÅNU, FIGURKY", price: 1900, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 23, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â OZDOBY", price: 1100, description: "Velikost: 8-10 porc√≠" },
          { id: 24, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR", price: 1400, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 25, name: "V MARCIP√ÅNU, BAGR", price: 1700, description: "Velikost: 8-10 porc√≠" },
          { id: 26, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â FIGURKY", price: 1700, description: "Velikost: 8-10 porc√≠" },
          { id: 27, name: "V ƒåOKOL√ÅDƒö, OZDOBY, JEDL√ù PAP√çR (2,5 Kg)", price: 1750, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 28, name: "OBSYPAN√ù PI≈†KOTEM, MARCIP√ÅNOV√â FIGURKY", price: 1650, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 29, name: "OBMAZAN√ù, OZDOBY, JEDL√ù PAP√çR", price: 2100, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 30, name: "2 PATRA S ƒåOKOL√ÅDOU, OZDOBY, JEDL√ù P.", price: 2700, description: "Orientaƒçn√≠ poƒçet porc√≠: 18-20" },
          { id: 31, name: "2 PATRA V MARCIP√ÅNU, BING", price: 3000, description: "Orientaƒçn√≠ poƒçet porc√≠: 18-20" },
          { id: 32, name: "V MARCIP√ÅNU, 6 MARCIP√ÅNOV√ùCH FIGUREK PAW", price: 2500, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 33, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â FIGURKY A OZDOBY", price: 2100, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 34, name: "V MARCIP√ÅNU, 1 MARCIP√ÅNOV√Å FIGURKA", price: 1350, description: "Velikost: 8-10 porc√≠" },
          { id: 35, name: "V MARCIP√ÅNU, 1 MARCIP√ÅNOV√Å FIGURKA", price: 1350, description: "Velikost: 8-10 porc√≠" },
          { id: 36, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â OZDOBY", price: 1900, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 37, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR, FIGURKA", price: 1700, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 38, name: "MARCIP√ÅN, KR√âM, OVOCE", price: 1500, description: "Velikost: 10-12 porc√≠" },
          { id: 39, name: "OBMAZAN√ù, OZDOBY, JEDL√ù PAP√çR, OVOCE", price: 1250, description: "Orientaƒçn√≠ poƒçet porc√≠: 10" },
          { id: 40, name: "OBMAZAN√ù, ƒåOKOL√ÅDA, OVOCE", price: 2000, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 41, name: "OBMAZAN√ù, ƒåOKOL√ÅDOV√ù OBSYP, OVOCE", price: 3200, description: "Orientaƒçn√≠ poƒçet porc√≠: 25" },
          { id: 42, name: "NAH√ù DORT, OVOCE", price: 1300, description: "Velikost: 8-10 porc√≠" },
          { id: 43, name: "ƒåOKOL√ÅDOV√ù PA≈ò√ç≈Ω, MALINY", price: 700, description: "Orientaƒçn√≠ poƒçet porc√≠: 10" },
          { id: 44, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â OZDOBY", price: 2200, description: "Orientaƒçn√≠ poƒçet porc√≠: 15-20" },
          { id: 45, name: "V ƒåOKOL√ÅDƒö, MARCIP√ÅNOV√â OZDOBY", price: 2100, description: "Orientaƒçn√≠ poƒçet porc√≠: 15-20" },
          { id: 46, name: "MAL√â SRDCE", price: 450, description: "Orientaƒçn√≠ poƒçet porc√≠: 6" },
          { id: 47, name: "V ƒåOKOL√ÅDƒö, MARCIP√ÅNOV√â OZDOBY", price: 3300, description: "Orientaƒçn√≠ poƒçet porc√≠: 20-25" },
          { id: 48, name: "V ƒåOKOL√ÅDƒö, MARCIP√ÅNOV√â OZDOBY", price: 700, description: "Orientaƒçn√≠ poƒçet porc√≠: 6" },
          { id: 49, name: "OBMAZAN√ù, MARCIP√ÅNOV√â OZDOBY", price: 1800, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 50, name: "MINI ROL√ÅDY", price: 200, description: "Orientaƒçn√≠ poƒçet porc√≠: 10" },
          { id: 51, name: "OBMAZAN√ù, OVOCE", price: 5500, description: "Orientaƒçn√≠ poƒçet porc√≠: 40-50" },
          { id: 52, name: "B√çL√ù FOND√ÅN, OVOCE", price: 2800, description: "Orientaƒçn√≠ poƒçet porc√≠: 15-20" },
          { id: 53, name: "NAH√ù DORT, OVOCE (5,5 Kg)", price: 3500, description: "Orientaƒçn√≠ poƒçet porc√≠: 20-25" },
          { id: 54, name: "OBMAZAN√ù, ≈ΩIV√â KVƒöTY", price: 3300, description: "Orientaƒçn√≠ poƒçet porc√≠: 20-25" },
          { id: 55, name: "SVATEBN√ç A DƒöKOVAC√ç DORTY V MARCIP√ÅNU", price: 5000, description: "Orientaƒçn√≠ poƒçet porc√≠: 35-40" },
          { id: 56, name: "OBMAZAN√ù, ƒåOKOL√ÅDOV√ù OBSYP, OZDOBY", price: 3300, description: "Orientaƒçn√≠ poƒçet porc√≠: 20-25" },
          { id: 57, name: "V MARCIP√ÅNU, MARCIP√ÅNOV√â OZDOBY", price: 2900, description: "Orientaƒçn√≠ poƒçet porc√≠: 20-25" },
          { id: 58, name: "OBMAZAN√ù, MARCIP√ÅNOV√â OZDOBY", price: 3000, description: "Orientaƒçn√≠ poƒçet porc√≠: 20-25" },
          { id: 59, name: "V MARCIP√ÅNU", price: 1500, description: "Orientaƒçn√≠ poƒçet porc√≠: 12" },
          { id: 60, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR", price: 2500, description: "Orientaƒçn√≠ poƒçet porc√≠: 15-20" },
          { id: 61, name: "V MARCIP√ÅNU, JEDL√ù PAP√çR, ƒåOKO HOBLINKY", price: 3000, description: "Orientaƒçn√≠ poƒçet porc√≠: 15-20" }
        ]
      };
    </script>

    <!-- REACT APP -->
    <script type="text/babel" data-presets="env,react">
      
      const { PRODUCTS, BRANCHES, EMAIL_TO, CONFIGURATOR_URL, MAIN_WEB_URL } = window.APP_DATA;

      // 1. IMAGE COMPONENT (Simplified)
      const ProductImage = ({ id, alt }) => {
        // Simple logic: Try JPG, if error, fallback to placeholder. Fast and reliable.
        const [src, setSrc] = React.useState(`images/${id}.jpg`);
        const handleError = () => {
             setSrc(`https://placehold.co/400x400/fff1f2/e11d48?text=Dort+${id}`);
        };
        return (
            <img 
                src={src} 
                alt={alt} 
                onError={handleError}
                className="h-full w-full object-cover transition-transform duration-500 hover:scale-105"
                loading="lazy"
            />
        );
      };

      // 2. MODAL & FORM
      const OrderForm = ({ product, onCancel }) => {
        const [formData, setFormData] = React.useState({ name: '', phone: '', date: '', branch: BRANCHES[0] });

        const handleSubmit = (e) => {
            e.preventDefault();
            const body = `Dort: ${product.name} (${product.id})\nCena: ${product.price} Kƒç\n\nJm√©no: ${formData.name}\nTelefon: ${formData.phone}\nDatum: ${formData.date}\nPoboƒçka: ${formData.branch}`;
            window.location.href = `mailto:${EMAIL_TO}?subject=Objedn√°vka dortu ƒç. ${product.id}&body=${encodeURIComponent(body)}`;
            onCancel();
        };

        return (
            <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
                <div className="bg-white rounded-xl p-6 w-full max-w-md shadow-2xl animate-fade-in-up">
                    <h3 className="text-xl font-bold mb-4 font-serif">Objednat: {product.name}</h3>
                    <form onSubmit={handleSubmit} className="space-y-3">
                        <input required placeholder="Va≈°e jm√©no" className="w-full border p-2 rounded" value={formData.name} onChange={e=>setFormData({...formData, name:e.target.value})} />
                        <input required placeholder="Telefon" className="w-full border p-2 rounded" value={formData.phone} onChange={e=>setFormData({...formData, phone:e.target.value})} />
                        <input required type="date" className="w-full border p-2 rounded" value={formData.date} onChange={e=>setFormData({...formData, date:e.target.value})} />
                        <select className="w-full border p-2 rounded" value={formData.branch} onChange={e=>setFormData({...formData, branch:e.target.value})}>
                            {BRANCHES.map(b => <option key={b} value={b}>{b}</option>)}
                        </select>
                        <div className="flex gap-2 mt-4">
                            <button type="button" onClick={onCancel} className="flex-1 bg-gray-200 py-2 rounded font-bold">Zru≈°it</button>
                            <button type="submit" className="flex-1 bg-rose-600 text-white py-2 rounded font-bold">Odeslat</button>
                        </div>
                    </form>
                </div>
            </div>
        );
      };

      // 3. MAIN APP
      const App = () => {
        const [selected, setSelected] = React.useState(null);

        // Hide loader on mount
        React.useEffect(() => {
            const l = document.getElementById('initial-loader');
            if(l) l.style.display = 'none';
        }, []);

        return (
            <div className="bg-white min-h-screen pb-10">
                {/* NAVIGATION */}
                <div className="fixed top-0 left-0 w-full p-2 z-40 flex justify-center pointer-events-none">
                    <a href={MAIN_WEB_URL} className="pointer-events-auto bg-white/90 backdrop-blur px-6 py-2 rounded-full shadow-lg border border-gray-200 text-rose-600 font-bold hover:bg-rose-50 transition">
                        ‚¨Ö Zpƒõt na hlavn√≠ web
                    </a>
                </div>

                {/* HERO - COMPACT & WHITE */}
                <div className="bg-white pt-24 pb-8 px-4 text-center border-b border-rose-100">
                    <h1 className="text-4xl md:text-5xl font-bold text-gray-900 mb-2 font-serif">
                        Cukr√°≈ôstv√≠ <span className="text-rose-600">Blahutovi</span>
                    </h1>
                    <p className="text-gray-500 mb-6">Tradiƒçn√≠ v√Ωroba od roku 1995</p>
                    
                    <a href={CONFIGURATOR_URL} className="inline-block bg-rose-600 text-white px-8 py-3 rounded-full font-bold shadow-lg hover:bg-rose-700 transition transform hover:scale-105">
                        üç∞ Sestavit vlastn√≠ dort
                    </a>
                </div>

                {/* PRODUCTS LIST */}
                <div className="max-w-7xl mx-auto px-4 py-8">
                    <p className="text-center text-gray-400 mb-6 text-sm">Naƒçteno {PRODUCTS.length} dort≈Ø</p>
                    
                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        {PRODUCTS.map(p => (
                            <div key={p.id} className="bg-white rounded-lg shadow-sm hover:shadow-xl border border-gray-100 overflow-hidden transition-all duration-300 flex flex-col">
                                <div className="h-64 overflow-hidden relative bg-gray-50">
                                    <ProductImage id={p.id} alt={p.name} />
                                    <span className="absolute top-2 right-2 bg-white px-2 py-1 rounded-md text-sm font-bold shadow-sm">{p.price} Kƒç</span>
                                    <span className="absolute top-2 left-2 bg-rose-600 text-white px-2 py-1 rounded-md text-xs font-bold shadow-sm">#{p.id}</span>
                                </div>
                                <div className="p-4 flex flex-col flex-1">
                                    <h3 className="font-bold text-lg mb-1 leading-tight">{p.name}</h3>
                                    <p className="text-gray-500 text-sm mb-4">{p.description}</p>
                                    <button onClick={() => setSelected(p)} className="mt-auto w-full border-2 border-rose-100 text-rose-600 py-2 rounded-lg font-bold hover:bg-rose-50 transition">
                                        Objednat
                                    </button>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>

                {selected && <OrderForm product={selected} onCancel={() => setSelected(null)} />}
            </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  <script type="module" src="/index.tsx"></script>
</body>
</html>