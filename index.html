<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CukrÃ¡Å™stvÃ­ Blahutovi - Katalog dortÅ¯</title>
    <meta name="description" content="TradiÄnÃ­ cukrÃ¡rna s lÃ¡skou k Å™emeslu. Objednejte si ty nejlepÅ¡Ã­ dorty online." />
    
    <!-- Social Media Tags (Open Graph) -->
    <meta property="og:title" content="CukrÃ¡Å™stvÃ­ Blahutovi" />
    <meta property="og:description" content="TradiÄnÃ­ cukrÃ¡rna s lÃ¡skou k Å™emeslu. Sestavte si vlastnÃ­ dort nebo vyberte z naÅ¡Ã­ nabÃ­dky." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://placehold.co/1200x630/fecdd3/881337?text=CukrÃ¡Å™stvÃ­+Blahutovi" />
    
    <!-- Favicon (Cake Emoji) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ°</text></svg>">
    
    <!-- React & ReactDOM (CDNJS - More stable) -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel Standalone -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#e11d48', // rose-600
              secondary: '#fca5a5', // rose-300
              cream: '#fff1f2', // rose-50
              dark: '#44403c', // stone-700
            },
            fontFamily: {
              serif: ['"Playfair Display"', 'serif'],
              sans: ['"Lato"', 'sans-serif'],
            },
            animation: {
              'fade-in-up': 'fadeInUp 0.8s ease-out forwards',
            },
            keyframes: {
              fadeInUp: {
                '0%': { opacity: '0', transform: 'translateY(20px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              }
            }
          }
        }
      }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    
    <style>
      body {
        font-family: 'Lato', sans-serif;
        background-color: #ffffff;
        color: #44403c;
      }
      h1, h2, h3, h4, h5, h6 {
        font-family: 'Playfair Display', serif;
      }
      body.modal-open {
        overflow: hidden;
      }
      html {
        scroll-behavior: smooth;
      }
      #error-container {
        display: none;
        padding: 20px;
        background: #fee2e2;
        color: #991b1b;
        border: 1px solid #f87171;
        margin: 20px;
        border-radius: 8px;
        font-family: sans-serif;
        z-index: 9999;
        position: relative;
        text-align: center;
      }
      /* Loading Spinner */
      .initial-loader {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        width: 100%;
        position: fixed;
        top: 0;
        left: 0;
        background: white;
        z-index: 9999;
        transition: opacity 0.5s ease-out;
      }
      .initial-loader.fade-out {
        opacity: 0;
        pointer-events: none;
      }
    </style>
  <link rel="stylesheet" href="/index.css">
</head>
  <body>
    <!-- Error Handler -->
    <div id="error-container"></div>
    
    <!-- Initial Loader (Visible before React mounts) -->
    <div id="initial-loader" class="initial-loader">
      <div class="text-6xl animate-bounce mb-4">ğŸ°</div>
      <div class="text-xl text-rose-600 font-serif font-bold">NaÄÃ­tÃ¡m cukrÃ¡rnu...</div>
    </div>

    <!-- React Root -->
    <div id="root"></div>

    <!-- DATA SCRIPT (Native JS for safety and speed) -->
    <script>
      // Global Data Objects
      window.APP_DATA = {
        EMAIL_TO: "objednavky@cukrarstviblahutovi.cz",
        MAIN_WEB_URL: "https://www.cukrarstviblahutovi.cz",
        CONFIGURATOR_URL: "https://www.cukrarstviblahutovi.cz/konfigurator-dortu/",
        BRANCHES: [
          "HlavnÃ­ prodejna (Centrum)",
          "PoboÄka NÃ¡mÄ›stÃ­",
          "VÃ½dejna Sklad"
        ],
        PRODUCTS: [
          { id: 1, name: "V MARCIPÃNU, 2 FIGURKY", price: 1800, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 1" },
          { id: 2, name: "OBMAZANÃ, MARCIPÃNOVÃ‰ OZDOBY", price: 1900, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 2" },
          { id: 3, name: "2 PATRA, V MARCIPÃNU", price: 2800, description: "OrientaÄnÃ­ poÄet porcÃ­: 20", imageAlt: "Dort Ä. 3" },
          { id: 4, name: "OBMAZANÃ, SNÄšHOVÃ‰ OZDOBY, MAKRONKY", price: 1600, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 4" },
          { id: 5, name: "V MARCIPÃNU, 2 MARCIPÃNOVÃ‰ FIGURKY", price: 1600, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 5" },
          { id: 6, name: "V MARCIPÃNU (3,5 Kg)", price: 2100, description: "OrientaÄnÃ­ poÄet porcÃ­: 15-20", imageAlt: "Dort Ä. 6" },
          { id: 7, name: "V MARCIPÃNU, MARCIPÃNOVÃ‰ OZDOBY", price: 1700, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 7" },
          { id: 8, name: "V MARCIPÃNU, 1 MARCIPÃNOVÃ FIGURKA", price: 1600, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 8" },
          { id: 9, name: "MARCIPÃNOVÃ PLACKA, JEDLÃ PAPÃR", price: 1400, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 9" },
          { id: 10, name: "V MARCIPÃNU, OZDOBY, JEDLÃ PAPÃR", price: 2000, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 10" },
          { id: 11, name: "OBMAZANÃ, MARCIPÃNOVÃ‰ OZDOBY", price: 1800, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 11" },
          { id: 12, name: "MODELOVANÃ V MARCIPÃNU - BEZUBKA", price: 3100, description: "OrientaÄnÃ­ poÄet porcÃ­: 25", imageAlt: "Dort Ä. 12" },
          { id: 13, name: "V MARCIPÃNU, JEDLÃ PAPÃR", price: 1400, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 13" },
          { id: 14, name: "V MARCIPÃNU, MARCIPÃNOVÃ‰ OZDOBY", price: 2700, description: "OrientaÄnÃ­ poÄet porcÃ­: 15-20", imageAlt: "Dort Ä. 14" },
          { id: 15, name: "V MARCIPÃNU", price: 1500, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 15" },
          { id: 16, name: "V MARCIPÃNU, 1 MARCIPÃNOVÃ FIGURKA", price: 800, description: "Velikost: 6-8 porcÃ­", imageAlt: "Dort Ä. 16" },
          { id: 17, name: "V MARCIPÃNU", price: 2300, description: "OrientaÄnÃ­ poÄet porcÃ­: 14", imageAlt: "Dort Ä. 17" },
          { id: 18, name: "ÄŒÃSLICE V MARCIPÃNU (4,5 Kg)", price: 2900, description: "OrientaÄnÃ­ poÄet porcÃ­: 25-30", imageAlt: "Dort Ä. 18" },
          { id: 19, name: "V MARCIPÃNU, JEDLÃ PAPÃR", price: 1600, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 19" },
          { id: 20, name: "V MARCIPÃNU, JEDLÃ PAPÃR", price: 1500, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 20" },
          { id: 21, name: "V MARCIPÃNU, JEDLÃ PAPÃR", price: 1400, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 21" },
          { id: 22, name: "V MARCIPÃNU, FIGURKY", price: 1900, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 22" },
          { id: 23, name: "V MARCIPÃNU, MARCIPÃNOVÃ‰ OZDOBY", price: 1100, description: "Velikost: 8-10 porcÃ­", imageAlt: "Dort Ä. 23" },
          { id: 24, name: "V MARCIPÃNU, JEDLÃ PAPÃR", price: 1400, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 24" },
          { id: 25, name: "V MARCIPÃNU, BAGR", price: 1700, description: "Velikost: 8-10 porcÃ­", imageAlt: "Dort Ä. 25" },
          { id: 26, name: "V MARCIPÃNU, MARCIPÃNOVÃ‰ FIGURKY", price: 1700, description: "Velikost: 8-10 porcÃ­", imageAlt: "Dort Ä. 26" },
          { id: 27, name: "V ÄŒOKOLÃDÄš, OZDOBY, JEDLÃ PAPÃR (2,5 Kg)", price: 1750, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 27" },
          { id: 28, name: "OBSYPANÃ PIÅ KOTEM, MARCIPÃNOVÃ‰ FIGURKY", price: 1650, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 28" },
          { id: 29, name: "OBMAZANÃ, OZDOBY, JEDLÃ PAPÃR", price: 2100, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 29" },
          { id: 30, name: "2 PATRA S ÄŒOKOLÃDOU, OZDOBY, JEDLÃ P.", price: 2700, description: "OrientaÄnÃ­ poÄet porcÃ­: 18-20", imageAlt: "Dort Ä. 30" },
          { id: 31, name: "2 PATRA V MARCIPÃNU, BING", price: 3000, description: "OrientaÄnÃ­ poÄet porcÃ­: 18-20", imageAlt: "Dort Ä. 31" },
          { id: 32, name: "V MARCIPÃNU, 6 MARCIPÃNOVÃCH FIGUREK PAW", price: 2500, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 32" },
          { id: 33, name: "V MARCIPÃNU, MARCIPÃNOVÃ‰ FIGURKY A OZDOBY", price: 2100, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 33" },
          { id: 34, name: "V MARCIPÃNU, 1 MARCIPÃNOVÃ FIGURKA", price: 1350, description: "Velikost: 8-10 porcÃ­", imageAlt: "Dort Ä. 34" },
          { id: 35, name: "V MARCIPÃNU, 1 MARCIPÃNOVÃ FIGURKA", price: 1350, description: "Velikost: 8-10 porcÃ­", imageAlt: "Dort Ä. 35" },
          { id: 36, name: "V MARCIPÃNU, MARCIPÃNOVÃ‰ OZDOBY", price: 1900, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 36" },
          { id: 37, name: "V MARCIPÃNU, JEDLÃ PAPÃR, FIGURKA", price: 1700, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 37" },
          { id: 38, name: "MARCIPÃN, KRÃ‰M, OVOCE", price: 1500, description: "Velikost: 10-12 porcÃ­", imageAlt: "Dort Ä. 38" },
          { id: 39, name: "OBMAZANÃ, OZDOBY, JEDLÃ PAPÃR, OVOCE", price: 1250, description: "OrientaÄnÃ­ poÄet porcÃ­: 10", imageAlt: "Dort Ä. 39" },
          { id: 40, name: "OBMAZANÃ, ÄŒOKOLÃDA, OVOCE", price: 2000, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 40" },
          { id: 41, name: "OBMAZANÃ, ÄŒOKOLÃDOVÃ OBSYP, OVOCE", price: 3200, description: "OrientaÄnÃ­ poÄet porcÃ­: 25", imageAlt: "Dort Ä. 41" },
          { id: 42, name: "NAHÃ DORT, OVOCE", price: 1300, description: "Velikost: 8-10 porcÃ­", imageAlt: "Dort Ä. 42" },
          { id: 43, name: "ÄŒOKOLÃDOVÃ PAÅ˜ÃÅ½, MALINY", price: 700, description: "OrientaÄnÃ­ poÄet porcÃ­: 10", imageAlt: "Dort Ä. 43" },
          { id: 44, name: "V MARCIPÃNU, MARCIPÃNOVÃ‰ OZDOBY", price: 2200, description: "OrientaÄnÃ­ poÄet porcÃ­: 15-20", imageAlt: "Dort Ä. 44" },
          { id: 45, name: "V ÄŒOKOLÃDÄš, MARCIPÃNOVÃ‰ OZDOBY", price: 2100, description: "OrientaÄnÃ­ poÄet porcÃ­: 15-20", imageAlt: "Dort Ä. 45" },
          { id: 46, name: "MALÃ‰ SRDCE", price: 450, description: "OrientaÄnÃ­ poÄet porcÃ­: 6", imageAlt: "Dort Ä. 46" },
          { id: 47, name: "V ÄŒOKOLÃDÄš, MARCIPÃNOVÃ‰ OZDOBY", price: 3300, description: "OrientaÄnÃ­ poÄet porcÃ­: 20-25", imageAlt: "Dort Ä. 47" },
          { id: 48, name: "V ÄŒOKOLÃDÄš, MARCIPÃNOVÃ‰ OZDOBY", price: 700, description: "OrientaÄnÃ­ poÄet porcÃ­: 6", imageAlt: "Dort Ä. 48" },
          { id: 49, name: "OBMAZANÃ, MARCIPÃNOVÃ‰ OZDOBY", price: 1800, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 49" },
          { id: 50, name: "MINI ROLÃDY", price: 200, description: "OrientaÄnÃ­ poÄet porcÃ­: 10", imageAlt: "Dort Ä. 50" },
          { id: 51, name: "OBMAZANÃ, OVOCE", price: 5500, description: "OrientaÄnÃ­ poÄet porcÃ­: 40-50", imageAlt: "Dort Ä. 51" },
          { id: 52, name: "BÃLÃ FONDÃN, OVOCE", price: 2800, description: "OrientaÄnÃ­ poÄet porcÃ­: 15-20", imageAlt: "Dort Ä. 52" },
          { id: 53, name: "NAHÃ DORT, OVOCE (5,5 Kg)", price: 3500, description: "OrientaÄnÃ­ poÄet porcÃ­: 20-25", imageAlt: "Dort Ä. 53" },
          { id: 54, name: "OBMAZANÃ, Å½IVÃ‰ KVÄšTY", price: 3300, description: "OrientaÄnÃ­ poÄet porcÃ­: 20-25", imageAlt: "Dort Ä. 54" },
          { id: 55, name: "SVATEBNÃ A DÄšKOVACÃ DORTY V MARCIPÃNU", price: 5000, description: "OrientaÄnÃ­ poÄet porcÃ­: 35-40", imageAlt: "Dort Ä. 55" },
          { id: 56, name: "OBMAZANÃ, ÄŒOKOLÃDOVÃ OBSYP, OZDOBY", price: 3300, description: "OrientaÄnÃ­ poÄet porcÃ­: 20-25", imageAlt: "Dort Ä. 56" },
          { id: 57, name: "V MARCIPÃNU, MARCIPÃNOVÃ‰ OZDOBY", price: 2900, description: "OrientaÄnÃ­ poÄet porcÃ­: 20-25", imageAlt: "Dort Ä. 57" },
          { id: 58, name: "OBMAZANÃ, MARCIPÃNOVÃ‰ OZDOBY", price: 3000, description: "OrientaÄnÃ­ poÄet porcÃ­: 20-25", imageAlt: "Dort Ä. 58" },
          { id: 59, name: "V MARCIPÃNU", price: 1500, description: "OrientaÄnÃ­ poÄet porcÃ­: 12", imageAlt: "Dort Ä. 59" },
          { id: 60, name: "V MARCIPÃNU, JEDLÃ PAPÃR", price: 2500, description: "OrientaÄnÃ­ poÄet porcÃ­: 15-20", imageAlt: "Dort Ä. 60" },
          { id: 61, name: "V MARCIPÃNU, JEDLÃ PAPÃR, ÄŒOKO HOBLINKY", price: 3000, description: "OrientaÄnÃ­ poÄet porcÃ­: 15-20", imageAlt: "Dort Ä. 61" }
        ]
      };
    </script>

    <!-- Global Error Handler Script -->
    <script>
      window.onerror = function(message, source, lineno, colno, error) {
        var container = document.getElementById('error-container');
        var loader = document.getElementById('initial-loader');
        if(loader) loader.style.display = 'none';
        
        container.style.display = 'block';
        container.innerHTML = '<strong>OmlouvÃ¡me se, nastala chyba aplikace:</strong><br>' + message + 
        '<br><small>ProsÃ­m, zkuste obnovit strÃ¡nku (Ctrl+F5).</small>';
        console.error("Global Error:", error);
      };
    </script>

    <!-- REACT APPLICATION -->
    <script type="text/babel" data-presets="env,react">
      
      const { PRODUCTS, BRANCHES, EMAIL_TO, CONFIGURATOR_URL, MAIN_WEB_URL } = window.APP_DATA;

      // --- COMPONENTS ---

      const Button = ({ children, variant = 'primary', size = 'md', fullWidth = false, className = '', ...props }) => {
        const baseStyles = "inline-flex items-center justify-center rounded-full font-bold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed";
        const variants = {
          primary: "bg-rose-600 hover:bg-rose-700 text-white shadow-lg hover:shadow-xl focus:ring-rose-500",
          secondary: "bg-white hover:bg-rose-50 text-rose-600 border border-rose-200 shadow-sm hover:shadow-md focus:ring-rose-200",
        };
        const sizes = {
          sm: "px-3 py-1.5 text-sm",
          md: "px-6 py-3 text-base",
          lg: "px-8 py-4 text-lg",
          xl: "px-10 py-5 text-xl uppercase tracking-wide",
        };
        return (
          <button className={`${baseStyles} ${variants[variant]} ${sizes[size]} ${fullWidth ? "w-full" : ""} ${className}`} {...props}>
            {children}
          </button>
        );
      };

      const Modal = ({ isOpen, onClose, title, children }) => {
        React.useEffect(() => {
          document.body.classList.toggle('modal-open', isOpen);
          return () => document.body.classList.remove('modal-open');
        }, [isOpen]);

        if (!isOpen) return null;

        return (
          <div className="fixed inset-0 z-[100] flex items-center justify-center overflow-y-auto overflow-x-hidden bg-black/50 p-4 backdrop-blur-sm transition-opacity">
            <div className="relative w-full max-w-lg rounded-2xl bg-white shadow-2xl ring-1 ring-gray-200 my-8 animate-fade-in-up">
              <div className="flex items-center justify-between border-b border-gray-100 px-6 py-4">
                <h3 className="text-xl font-serif font-bold text-gray-900">{title}</h3>
                <button onClick={onClose} className="rounded-full p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600">
                  <svg className="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
              </div>
              <div className="p-6">{children}</div>
            </div>
          </div>
        );
      };

      const OrderForm = ({ product, onCancel }) => {
        const getMinDate = () => {
          const date = new Date();
          date.setDate(date.getDate() + 7);
          return date.toISOString().split('T')[0];
        };

        const [formData, setFormData] = React.useState({
          name: '', phone: '', date: getMinDate(), branch: BRANCHES[0], notes: ''
        });

        const handleSubmit = (e) => {
          e.preventDefault();
          const subject = encodeURIComponent(`ObjednÃ¡vka dortu: ${product.name}`);
          const body = encodeURIComponent(`DobrÃ½ den,\n\nMÃ¡m zÃ¡jem o zÃ¡vaznou objednÃ¡vku dortu.\n\nDETAILY PRODUKTU:\nDort: ${product.name}\nCena: ${product.price} KÄ\nID: ${product.id}\n\nÃšDAJE:\nJmÃ©no: ${formData.name}\nTelefon: ${formData.phone}\nDatum vyzvednutÃ­: ${formData.date}\nPoboÄka: ${formData.branch}\nPoznÃ¡mka: ${formData.notes || '-'}`);
          window.location.href = `mailto:${EMAIL_TO}?subject=${subject}&body=${body}`;
          setTimeout(onCancel, 1000);
        };

        return (
          <form onSubmit={handleSubmit} className="space-y-4">
            <div className="rounded-lg bg-rose-50 p-4 mb-4 border border-rose-100">
              <div className="flex justify-between items-center">
                <p className="text-lg font-bold text-gray-900">{product.name}</p>
                <p className="text-lg font-semibold text-rose-600">{product.price} KÄ</p>
              </div>
            </div>
            <div><label className="block text-sm font-medium mb-1">JmÃ©no</label><input required className="w-full rounded-md border-gray-300 shadow-sm p-2 border" value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} /></div>
            <div><label className="block text-sm font-medium mb-1">Telefon</label><input required className="w-full rounded-md border-gray-300 shadow-sm p-2 border" value={formData.phone} onChange={e => setFormData({...formData, phone: e.target.value})} /></div>
            <div><label className="block text-sm font-medium mb-1">Datum vyzvednutÃ­</label><input required type="date" min={getMinDate()} className="w-full rounded-md border-gray-300 shadow-sm p-2 border" value={formData.date} onChange={e => setFormData({...formData, date: e.target.value})} /></div>
            <div><label className="block text-sm font-medium mb-1">PoboÄka</label><select className="w-full rounded-md border-gray-300 shadow-sm p-2 border" value={formData.branch} onChange={e => setFormData({...formData, branch: e.target.value})}>{BRANCHES.map(b => <option key={b} value={b}>{b}</option>)}</select></div>
            <div><label className="block text-sm font-medium mb-1">PoznÃ¡mka</label><textarea className="w-full rounded-md border-gray-300 shadow-sm p-2 border" rows="2" value={formData.notes} onChange={e => setFormData({...formData, notes: e.target.value})}></textarea></div>
            <div className="pt-4 flex gap-3">
              <Button type="button" variant="secondary" fullWidth onClick={onCancel}>ZruÅ¡it</Button>
              <Button type="submit" variant="primary" fullWidth>Odeslat</Button>
            </div>
          </form>
        );
      };

      const ProductCard = ({ product, onOrder }) => {
        const EXTENSIONS = ['jpg', 'jpeg', 'png', 'webp', 'jfif', 'JPG', 'JPEG', 'PNG', 'JFIF'];
        const [extIndex, setExtIndex] = React.useState(0);
        const [usePlaceholder, setUsePlaceholder] = React.useState(false);

        React.useEffect(() => { setExtIndex(0); setUsePlaceholder(false); }, [product.id]);

        const getImageUrl = () => {
          if (usePlaceholder) return `https://placehold.co/600x600/fff1f2/e11d48?text=${encodeURIComponent(product.name.substring(0, 15))}`;
          return `images/${product.id}.${EXTENSIONS[extIndex]}`;
        };

        return (
          <div className="group flex flex-col h-full overflow-hidden rounded-2xl bg-white shadow-sm transition-all hover:-translate-y-1 hover:shadow-xl border border-stone-100">
            <div className="relative aspect-square overflow-hidden bg-stone-100">
              <img src={getImageUrl()} alt={product.imageAlt} onError={() => { if(extIndex < EXTENSIONS.length - 1) setExtIndex(p => p+1); else setUsePlaceholder(true); }} className="h-full w-full object-cover transition-transform duration-700 group-hover:scale-110" loading="lazy" />
              <div className="absolute top-4 right-4 rounded-full bg-white/95 px-3 py-1 text-sm font-bold text-gray-900 shadow-sm backdrop-blur-sm">{product.price} KÄ</div>
              <div className="absolute top-4 left-4 rounded-full bg-rose-500/90 px-3 py-1 text-xs font-bold text-white shadow-sm backdrop-blur-sm">#{product.id}</div>
            </div>
            <div className="flex flex-1 flex-col p-6">
              <h3 className="mb-2 text-xl font-serif font-bold text-gray-900 leading-tight">{product.name}</h3>
              <p className="mb-6 flex-1 text-sm leading-relaxed text-gray-600">{product.description}</p>
              <Button onClick={() => onOrder(product)} variant="secondary" fullWidth className="mt-auto group-hover:bg-rose-50 group-hover:border-rose-300">Objednat dort</Button>
            </div>
          </div>
        );
      };

      const Hero = () => {
        const scrollToProducts = () => {
          document.getElementById('nabidka').scrollIntoView({ behavior: 'smooth' });
        };

        return (
          <section className="relative flex flex-col min-h-[60vh] md:min-h-[70vh] items-center justify-center overflow-hidden bg-rose-50 px-4 text-center pt-20 pb-10">
            {/* Background blobs */}
            <div className="absolute top-0 left-0 h-64 w-64 -translate-x-1/2 -translate-y-1/2 rounded-full bg-rose-100/60 blur-3xl mix-blend-multiply"></div>
            <div className="absolute bottom-0 right-0 h-64 w-64 translate-x-1/2 translate-y-1/2 rounded-full bg-orange-100/60 blur-3xl mix-blend-multiply"></div>
            
            <div className="relative z-10 mx-auto max-w-4xl space-y-6 animate-fade-in-up">
              <div className="space-y-4">
                <span className="inline-block rounded-full bg-white/80 px-4 py-1.5 text-xs font-bold tracking-widest text-rose-600 uppercase shadow-sm backdrop-blur-sm ring-1 ring-rose-100">RodinnÃ¡ tradice od roku 1995</span>
                <h1 className="text-4xl font-bold leading-tight text-gray-900 sm:text-5xl md:text-6xl font-serif">
                  CukrÃ¡Å™stvÃ­ <span className="text-rose-600">Blahutovi</span>
                </h1>
                <p className="mx-auto max-w-2xl text-lg text-gray-600 font-light leading-relaxed">TradiÄnÃ­ cukrÃ¡rna s lÃ¡skou k Å™emeslu. PeÄeme z poctivÃ½ch surovin.</p>
              </div>

              <div className="flex flex-col items-center justify-center gap-4 pt-2">
                <a href={CONFIGURATOR_URL} className="w-full sm:w-auto transform transition-transform hover:scale-105">
                  <Button size="xl" className="w-full shadow-rose-300/50 shadow-2xl"><span className="mr-2">ğŸ°</span> Sestavit vlastnÃ­ dort</Button>
                </a>
              </div>
              <p className="text-xs text-gray-400">PÅ™echod do online konfigurÃ¡toru</p>
            </div>

            {/* Scroll Indicator */}
            <button onClick={scrollToProducts} className="absolute bottom-6 left-1/2 -translate-x-1/2 animate-bounce cursor-pointer p-2 text-rose-400 hover:text-rose-600 transition-colors" aria-label="Posunout dolÅ¯">
              <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>
            </button>
          </section>
        );
      };

      const App = () => {
        const [selectedProduct, setSelectedProduct] = React.useState(null);
        const [isModalOpen, setIsModalOpen] = React.useState(false);

        // Remove loading spinner when App mounts
        React.useEffect(() => {
          const loader = document.getElementById('initial-loader');
          if (loader) {
            loader.classList.add('fade-out');
            setTimeout(() => loader.remove(), 500);
          }
        }, []);

        const handleOrderClick = (product) => { setSelectedProduct(product); setIsModalOpen(true); };
        const handleCloseModal = () => { setIsModalOpen(false); setTimeout(() => setSelectedProduct(null), 300); };

        if (!PRODUCTS || PRODUCTS.length === 0) {
           return <div className="text-center p-10 text-red-600">Chyba: NepodaÅ™ilo se naÄÃ­st seznam dortÅ¯.</div>;
        }

        return (
          <div className="min-h-screen bg-stone-50 text-stone-800 font-sans selection:bg-rose-200 selection:text-rose-900">
            <nav className="fixed top-0 left-0 w-full p-4 z-40 pointer-events-none">
              <div className="container mx-auto">
                 <a href={MAIN_WEB_URL} className="pointer-events-auto inline-flex items-center gap-2 text-stone-600 hover:text-rose-600 font-bold bg-white/90 backdrop-blur px-5 py-2.5 rounded-full shadow-lg border border-stone-100 transition-all hover:scale-105 hover:shadow-xl">
                    <span>â¬…</span> ZpÄ›t na hlavnÃ­ web
                 </a>
              </div>
            </nav>

            <Hero />

            <section className="py-16 px-4 md:px-8 bg-white relative z-20" id="nabidka">
              <div className="container mx-auto max-w-7xl">
                <div className="mb-12 text-center space-y-4">
                  <h2 className="text-3xl md:text-4xl font-serif font-bold text-gray-900">Vyberte si z naÅ¡Ã­ nabÃ­dky</h2>
                  <div className="h-1 w-20 bg-rose-400 mx-auto rounded-full"></div>
                </div>

                <div className="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
                  {PRODUCTS.map(product => (
                    <ProductCard key={product.id} product={product} onOrder={handleOrderClick} />
                  ))}
                </div>
              </div>
            </section>

            <footer className="bg-stone-900 text-stone-400 py-16 px-4">
              <div className="container mx-auto text-center space-y-8">
                <div><h3 className="text-3xl font-serif text-white">CukrÃ¡Å™stvÃ­ Blahutovi</h3><p className="text-stone-500">SladkÃ½ Å¾ivot od roku 1995</p></div>
                <div className="flex justify-center gap-8 text-sm font-medium"><a href={MAIN_WEB_URL} className="hover:text-white">O nÃ¡s</a><a href={MAIN_WEB_URL} className="hover:text-white">Kontakt</a></div>
                <div className="pt-8 border-t border-stone-800"><p>Â© {new Date().getFullYear()} CukrÃ¡Å™stvÃ­ Blahutovi.</p></div>
              </div>
            </footer>

            <Modal isOpen={isModalOpen} onClose={handleCloseModal} title="NovÃ¡ objednÃ¡vka">
              {selectedProduct && <OrderForm product={selectedProduct} onCancel={handleCloseModal} />}
            </Modal>
          </div>
        );
      };

      try {
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
      } catch (err) {
        console.error("Mount error:", err);
        throw err; // Trigger global error handler
      }
    </script>
  <script type="module" src="/index.tsx"></script>
</body>
</html>